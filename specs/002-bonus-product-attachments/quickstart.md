# Quickstart: Bonus Product Attachments

## Purpose
Guide merchants and internal testers through enabling bonus product attachments that highlight included items for subscription rules.

## Prerequisites
- App installed on nudun-dev-store with admin access.
- Messaging Console feature flag enabled (if applicable).
- Bonus attachment product exists in Shopify catalog with image and inventory tracking on.

## Steps
1. **Open Messaging Console**
   - Navigate to the embedded app `/app` home.
   - Select the subscription rule (Annual or Quarterly) you want to enhance.

2. **Attach a Bonus Product**
   - Click "Attach Bonus Product".
   - Use the product picker to choose the desired product and variant.
   - Set the included quantity (minimum 1) and confirm the value source:
     - `price` uses variant price automatically.
     - `custom` lets you enter a custom savings amount in currency units.

3. **Localize the Message**
   - Fill in the default title and body copy.
   - Provide French translations (fr) or leave blank to fall back to English.
   - Upload or confirm the image preview; alt text auto-populates from product title.

4. **Save and Preview**
   - Click Save; success toast confirms persistence.
   - Use the preview panel to verify bonus card renders with image, badge, quantity, and savings.

5. **Verify Checkout Experience**
   - In the Shopify checkout editor, add the subscription product to cart.
   - Confirm bonus attachment card appears within 100 ms, respecting locale and currency.

6. **Confirm Inventory Logging**
   - Complete a test order that includes the subscription.
   - Check Shopify inventory for the bonus product; quantity should decrease by the included amount with `included_bonus` note.
   - Review admin Audit Log entry showing the adjustment.

7. **Reset to Defaults (Optional)**
   - Use the "Reset Attachments" button to revert to baseline configuration if needed.

## Support Tips
- If the attached product is unpublished or deleted, the console flags an error and prompts re-selection.
- Webhook retries can be reviewed in the admin console debug panel or in server logs under `BonusInventoryAdjustment` status.
- For localization issues, ensure `locales/fr.json` has matching keys generated by the admin save.
